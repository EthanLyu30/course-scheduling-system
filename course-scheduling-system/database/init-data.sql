-- ============================================
-- 双向选择排课系统 - 初始化测试数据
-- ============================================

USE course_scheduling;

-- ============================================
-- 1. 学期配置
-- ============================================
INSERT INTO semester_config (semester, start_date, end_date, preference_start, preference_end, wish_start, wish_end, schedule_publish_date, is_current) VALUES
('2024-2025-2', '2025-02-24', '2025-07-06', '2025-01-10 00:00:00', '2025-02-10 23:59:59', '2025-02-11 00:00:00', '2025-02-20 23:59:59', '2025-02-22 08:00:00', 1);

-- ============================================
-- 2. 教师数据
-- ============================================
INSERT INTO teacher (teacher_no, name, gender, department, title, email, password, status) VALUES
('T001', '张明', 1, '计算机科学与技术学院', '教授', 'zhangming@suda.edu.cn', '123456', 1),
('T002', '李华', 2, '计算机科学与技术学院', '副教授', 'lihua@suda.edu.cn', '123456', 1),
('T003', '王芳', 2, '计算机科学与技术学院', '讲师', 'wangfang@suda.edu.cn', '123456', 1),
('T004', '陈伟', 1, '软件学院', '教授', 'chenwei@suda.edu.cn', '123456', 1),
('T005', '刘静', 2, '软件学院', '副教授', 'liujing@suda.edu.cn', '123456', 1);

-- ============================================
-- 3. 学生数据
-- ============================================
INSERT INTO student (student_no, name, gender, major, grade, class_name, email, password, status) VALUES
('2327406032', '吕霄阳', 1, '软件工程', '2023级', '软件2班', 'lvxy@stu.suda.edu.cn', '123456', 1),
('2327406001', '张三', 1, '软件工程', '2023级', '软件1班', 'zhangs@stu.suda.edu.cn', '123456', 1),
('2327406002', '李四', 2, '软件工程', '2023级', '软件1班', 'lis@stu.suda.edu.cn', '123456', 1),
('2327406003', '王五', 1, '软件工程', '2023级', '软件2班', 'wangw@stu.suda.edu.cn', '123456', 1),
('2327406004', '赵六', 2, '计算机科学与技术', '2023级', '计科1班', 'zhaol@stu.suda.edu.cn', '123456', 1);

-- ============================================
-- 4. 教室数据
-- ============================================
INSERT INTO classroom (room_code, building, room_name, capacity, room_type, has_projector, has_air_conditioner, status) VALUES
('A101', '理工楼A', '多媒体教室101', 120, 2, 1, 1, 1),
('A102', '理工楼A', '多媒体教室102', 80, 2, 1, 1, 1),
('A201', '理工楼A', '普通教室201', 60, 1, 0, 1, 1),
('B101', '理工楼B', '机房101', 50, 4, 1, 1, 1),
('B102', '理工楼B', '机房102', 50, 4, 1, 1, 1),
('C101', '实验楼C', '软件实验室1', 40, 3, 1, 1, 1),
('C102', '实验楼C', '软件实验室2', 40, 3, 1, 1, 1);

-- ============================================
-- 5. 课程数据
-- ============================================
INSERT INTO course (course_code, name, credits, hours, course_type, description, capacity, teacher_id, semester, popularity_index, status) VALUES
('CS301', '软件系统分析与设计', 3.0, 48, 1, '本课程介绍软件工程中的系统分析与设计方法，包括需求分析、UML建模、架构设计等内容。', 60, 1, '2024-2025-2', 85.5, 1),
('CS302', '数据库系统原理', 3.5, 56, 1, '深入学习关系数据库理论、SQL语言、数据库设计与优化。', 80, 2, '2024-2025-2', 90.2, 1),
('CS303', '计算机网络', 3.0, 48, 1, '学习计算机网络体系结构、TCP/IP协议、网络安全等内容。', 80, 3, '2024-2025-2', 78.8, 1),
('CS304', 'Web开发技术', 2.5, 40, 2, '学习现代Web开发技术，包括前端框架、后端开发、RESTful API等。', 50, 4, '2024-2025-2', 92.1, 1),
('CS305', '人工智能导论', 3.0, 48, 2, '介绍人工智能的基本概念、机器学习、深度学习入门。', 60, 1, '2024-2025-2', 95.6, 1),
('CS306', '软件测试', 2.0, 32, 2, '学习软件测试的基本方法、自动化测试、测试用例设计。', 50, 5, '2024-2025-2', 72.3, 1),
('CS307', '操作系统', 3.5, 56, 1, '学习操作系统的基本原理，包括进程管理、内存管理、文件系统等。', 80, 2, '2024-2025-2', 82.4, 1),
('CS308', '编译原理', 3.0, 48, 1, '学习编译器的基本原理与构造方法。', 60, 3, '2024-2025-2', 68.5, 1);

-- ============================================
-- 6. 偏好模板数据
-- ============================================
INSERT INTO preference_template (name, description, template_data, is_system) VALUES
('上午优先', '偏好上午时段（8:00-12:00）上课', '{"slots":[{"dayOfWeek":1,"startTime":"08:00","endTime":"12:00","level":4},{"dayOfWeek":2,"startTime":"08:00","endTime":"12:00","level":4},{"dayOfWeek":3,"startTime":"08:00","endTime":"12:00","level":4},{"dayOfWeek":4,"startTime":"08:00","endTime":"12:00","level":4},{"dayOfWeek":5,"startTime":"08:00","endTime":"12:00","level":4}]}', 1),
('下午优先', '偏好下午时段（14:00-18:00）上课', '{"slots":[{"dayOfWeek":1,"startTime":"14:00","endTime":"18:00","level":4},{"dayOfWeek":2,"startTime":"14:00","endTime":"18:00","level":4},{"dayOfWeek":3,"startTime":"14:00","endTime":"18:00","level":4},{"dayOfWeek":4,"startTime":"14:00","endTime":"18:00","level":4},{"dayOfWeek":5,"startTime":"14:00","endTime":"18:00","level":4}]}', 1),
('避免周末', '周末时段设为不可用', '{"slots":[{"dayOfWeek":6,"startTime":"08:00","endTime":"22:00","level":1},{"dayOfWeek":7,"startTime":"08:00","endTime":"22:00","level":1}]}', 1),
('工作日全天可用', '周一至周五全天可用', '{"slots":[{"dayOfWeek":1,"startTime":"08:00","endTime":"21:00","level":3},{"dayOfWeek":2,"startTime":"08:00","endTime":"21:00","level":3},{"dayOfWeek":3,"startTime":"08:00","endTime":"21:00","level":3},{"dayOfWeek":4,"startTime":"08:00","endTime":"21:00","level":3},{"dayOfWeek":5,"startTime":"08:00","endTime":"21:00","level":3}]}', 1),
('避免早八', '避免早上第一节课（8:00-9:30）', '{"slots":[{"dayOfWeek":1,"startTime":"08:00","endTime":"09:30","level":2},{"dayOfWeek":2,"startTime":"08:00","endTime":"09:30","level":2},{"dayOfWeek":3,"startTime":"08:00","endTime":"09:30","level":2},{"dayOfWeek":4,"startTime":"08:00","endTime":"09:30","level":2},{"dayOfWeek":5,"startTime":"08:00","endTime":"09:30","level":2}]}', 1);

-- ============================================
-- 7. 示例：学生时间偏好数据
-- ============================================
INSERT INTO student_preference (student_id, semester, version, is_current) VALUES
(1, '2024-2025-2', 1, 1);

INSERT INTO student_time_slot (preference_id, day_of_week, start_time, end_time, preference_level) VALUES
-- 周一
(1, 1, '08:00:00', '10:00:00', 3),
(1, 1, '10:00:00', '12:00:00', 4),
(1, 1, '14:00:00', '16:00:00', 4),
(1, 1, '16:00:00', '18:00:00', 3),
-- 周二
(1, 2, '08:00:00', '10:00:00', 2),
(1, 2, '10:00:00', '12:00:00', 4),
(1, 2, '14:00:00', '16:00:00', 3),
(1, 2, '16:00:00', '18:00:00', 4),
-- 周三
(1, 3, '08:00:00', '10:00:00', 4),
(1, 3, '10:00:00', '12:00:00', 4),
(1, 3, '14:00:00', '16:00:00', 2),
(1, 3, '16:00:00', '18:00:00', 3),
-- 周四
(1, 4, '08:00:00', '10:00:00', 3),
(1, 4, '10:00:00', '12:00:00', 4),
(1, 4, '14:00:00', '16:00:00', 4),
(1, 4, '16:00:00', '18:00:00', 3),
-- 周五
(1, 5, '08:00:00', '10:00:00', 2),
(1, 5, '10:00:00', '12:00:00', 3),
(1, 5, '14:00:00', '16:00:00', 4),
(1, 5, '16:00:00', '18:00:00', 4),
-- 周末不可用
(1, 6, '08:00:00', '22:00:00', 1),
(1, 7, '08:00:00', '22:00:00', 1);

-- ============================================
-- 8. 示例：学生选课意愿数据
-- ============================================
INSERT INTO student_wish (student_id, course_id, semester, priority, reason, status) VALUES
(1, 1, '2024-2025-2', 3, '本专业必修课程，对软件设计很感兴趣', 0),
(1, 2, '2024-2025-2', 3, '必修课程，数据库是后端开发的基础', 0),
(1, 4, '2024-2025-2', 2, '想学习现代Web开发技术，对前端很感兴趣', 0),
(1, 5, '2024-2025-2', 2, 'AI是未来趋势，想提前了解', 0);

-- ============================================
-- 完成提示
-- ============================================
SELECT '初始化数据导入完成！' AS message;
SELECT CONCAT('学生数量: ', COUNT(*)) AS info FROM student;
SELECT CONCAT('教师数量: ', COUNT(*)) AS info FROM teacher;
SELECT CONCAT('课程数量: ', COUNT(*)) AS info FROM course;
SELECT CONCAT('教室数量: ', COUNT(*)) AS info FROM classroom;
